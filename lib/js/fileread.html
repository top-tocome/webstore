<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>文件base64编码</title>
</head>

<body>
    <div>
        <input type="file" id="files" onchange="fileread()">
        <p id="context"></p>
    </div>

    <script>
        // function xmlrequest() {
        //     var xml = new XMLHttpRequest();
        //     xml.open("GET", "preview.json", true);
        //     xml.send();
        //     xml.onloadend = function () {
        //         var j = JSON.parse(xml.responseText);
        //         maximg = j.a;
        //         alert(maximg);
        //         Init();
        //     }
        function fileread() {
            //获取读取我文件的File对象
            var f = document.getElementById('files').files[0];
            var name = f.name;//读取选中文件的文件名
            var size = f.size;//读取选中文件的大小
            console.log("文件名:" + name + "大小:" + size);
            var reader = new FileReader();//这是核心,读取操作就是由它完成.
            reader.readAsDataURL(f);//读取文件的内容,也可以读取文件的URL
            reader.onload = function () {
                //当读取完成后回调这个函数,然后此时文件的内容存储到了result中,直接操作即可
                console.log(this.result);
                document.getElementById("context").innerHTML = this.result;
            }
        }
    </script>
</body>

</html>